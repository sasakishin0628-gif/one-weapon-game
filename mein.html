<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="mein.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Mochiy+Pop+One&display=swap" rel="stylesheet">
<Var><link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Share+Tech+Mono&display=swap" rel="stylesheet"></Var>
</head>
<body>
<div id="background" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;"></div>
<audio id="bgm" src="sounds/energy.mp3" loop autoplay></audio>



    <!--æˆ¦é—˜(2ç•ªç›®è¡¨ç¤º)-->


    <!--ã‚¹ãƒ†ãƒ¼ã‚¸ã‚¿ã‚°(æˆ¦é—˜æ™‚è¡¨ç¤º)-->
    <h1 id="stageLabel" style="display: none;"></h1>

    <div class="gameyou">
      <p id="you"></p>
      <p id="game"></p>
    </div>

    <!--æ•µè¡¨ç¤º(æˆ¦é—˜æ™‚è¡¨ç¤º)-->
    <div class="teki">
        <img id="tekiimg"  style="display: none;">
        <p id="teki" style="display: none;"></p>
    </div>

    <!--è‡ªåˆ†è¡¨ç¤º(æˆ¦é—˜æ™‚è¡¨ç¤º)-->
    <div class="zibunn">
        <p id="zibunn" style="display: none;">HPï¼š100</p>
    </div>

    <!--æˆ¦é—˜ãƒœã‚¿ãƒ³å››ã¤(æˆ¦é—˜æ™‚è¡¨ç¤º)-->
    <div class="battleWrapper">
  <div id="battleMenu" style="display: none;">
    <button id="kougeki">æ”»æ’ƒ</button>
    <button id="bakugeki">çˆ†æ’ƒ</button>
    <button id="bougai">å¦¨å®³</button>
    <button id="kaihuku">å›å¾©</button>
  </div>
</div>

    <!--åŠ¹æœéŸ³-->
    <audio id="attackSound" src="sounds/attack.mp3"></audio>
    <audio id="bombSound" src="sounds/bomb.wav"></audio>
    <audio id="sealSounds" src="sounds/seals.mp3"></audio>
    <audio id="sealSoundm" src="sounds/sealm.mp3"></audio> 
    <audio id="healSound" src="sounds/heal.mp3"></audio>
    <audio id="clearSound" src="sounds/clear.mp3"></audio>
    <audio id="overSound" src="sounds/over.mp3"></audio>
    <audio id="aidaSound" src="sounds/aida.mp3"></audio>


    <!--ãƒ†ã‚­ã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹(æˆ¦é—˜æ™‚è¡¨ç¤º)-->
    <div class="textbox">
        <p id="textbox" style="display: none;"></p>
    </div>






    <!--èª¬æ˜(1ç•ªç›®è¡¨ç¤º)-->

    <!--èª¬æ˜æ–‡ç« (SPACEã§æŠ¼ã™ã“ã¨ã«ã‚ˆã£ã¦é€²ã‚€)-->
    
    <div class="setumeitext">
        <p id="setumeitext"></p>
    </div>

    <!--æ­¦å™¨ã‚¬ã‚·ãƒ£(èª¬æ˜æ–‡ç« å¾ŒåŠã‹ã‚‰è¡¨ç¤º)-->
    <div class="bukigasya">
        <img id="bukigasyaimg" src="images/bukigatya.png" style="display: none;">
        <button id="bukigasya" style="display: none;">æ­¦å™¨ã‚¬ãƒãƒ£ã‚’å¼•ã</button>
    </div>

    <p id="syousai">â€»SPACEã‚’æŠ¼ã—ã¦æ¬¡ã«é€²ã¿ã¾ã™ã€‚</p>
    





    <!--å‡¦ç†-->
    <script type="text/javascript">

      
       //åŠ¹æœéŸ³å†ç”Ÿé–¢æ•°
       function playSound(id) {
       const sound = document.getElementById(id);
       if (sound) {
       sound.currentTime = 0;
       sound.volume = 1.0; // ğŸ”Š æœ€å¤§éŸ³é‡ã«è¨­å®šï¼
       sound.play().catch((error) => {
       console.error("åŠ¹æœéŸ³å†ç”Ÿã‚¨ãƒ©ãƒ¼:", error);
     });
   }
 }
        
        //å®šç¾©ä¸€è¦§

        // ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã®æƒ…å ±ï¼ˆã©ã“ã§ã‚‚ä½¿ãˆã‚‹ã‚ˆã†ã«æœ€åˆã«å®šç¾©ï¼‰
        let currentMonster = null;
        let monsterHP = 0;


        //èª¬æ˜æ–‡ã®ä½•è¡Œç›®ã¾ã§è¡¨ç¤ºã—ãŸã‹
        let setumeiLine = 0;

        //ã‚²ãƒ¼ãƒ ã®é€²è¡Œã‚¹ãƒ†ãƒƒãƒ—(èª¬æ˜â†’ã‚¬ã‚·ãƒ£â†’æˆ¦é—˜)
        let step = 0;

        //ã‚¬ã‚·ãƒ£ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚ŒãŸã‹ã©ã†ã‹
        let bukigasyaShown = false;

        //æ­¦å™¨ãŒå¼•ã‹ã‚ŒãŸã‹ã©ã†ã‹
        let bukiDrawn = false;

        //ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã‚’ç„¡åŠ¹ã«ã™ã‚‹ã‹ã©ã†ã‹
        let spaceDisabled = false;

        //æ­¦å™¨ã‚¬ã‚·ãƒ£ã§å¼•ã„ãŸæ­¦å™¨ã®æƒ…å ±ã‚’ä¿å­˜ã™ã‚‹ãŸã‚ã®å¤‰æ•°
        let mybuki = null;

        //è‡ªåˆ†ã®HP(100)
        let MyHP = 100;

        //ä»Šã©ã®ã‚¹ãƒ†ãƒ¼ã‚¸ã‚’è¡¨ã™ã‹ã®å¤‰æ•°
        let currentStage = 0;

        let gameOver = false;






        //é…åˆ—ä¸€è¦§

        //èª¬æ˜æ–‡ç« 
        const setumeibunnsyou = [
        'ã‚ˆã†ã“ãONE WEAPONã¸',   
        'ã‚ãªãŸã¯ã€ï¼‘å€‹ã®æ­¦å™¨ã‚’ä½¿ã£ã¦<br>AIãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’è¨ä¼ã—ã¦ã„ã£ã¦ã‚‚ã‚‰ã„ã¾ã™ã€‚',
        'ã‚¹ãƒ†ãƒ¼ã‚¸ã¯ã€ï¼‘ï¼ã¾ã§ã‚ã‚Š<br>ã‚ãªãŸã®HPãŒãªããªã‚‹ã¾ã§ã€æˆ¦ã£ã¦ã‚‚ã‚‰ã„ã¾ã™ã€‚',
        'æ“ä½œèª¬æ˜',
        '<span style="color:#78FF94; text-shadow: 0 0 3px #78FF94, 0 0 30px #78FF94, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;">æ”»æ’ƒ</span>&nbsp;&nbsp;&nbsp;<span style="color:#FF5F17; text-shadow: 0 0 3px #FF5F17, 0 0 30px #FF5F17, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;">çˆ†æ’ƒ</span>&nbsp;&nbsp;&nbsp;<span style="color:#C299FF; text-shadow: 0 0 3px #C299FF, 0 0 30px #C299FF, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;">å¦¨å®³</span>&nbsp;&nbsp;&nbsp;<span style="color:#FFABCE; text-shadow: 0 0 3px #FFABCE, 0 0 30px #FFABCE, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;">å›å¾©</span>ã®ï¼”ã¤ã‚’ä½¿ã£ã¦æˆ¦ã„ã¾ã™ã€‚',
        '<span style="color:#78FF94; text-shadow: 0 0 3px #78FF94, 0 0 30px #78FF94, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;">æ”»æ’ƒ</span>ï¼šè‡ªåˆ†ãŒå¼•ãå½“ã¦ãŸæ­¦å™¨ã®æ”»æ’ƒåŠ›ã‚’ã‚‚ã¨ã«ã€æ”»æ’ƒã—ã¾ã™ã€‚',
        '<span style="color:#FF5F17; text-shadow: 0 0 3px #FF5F17, 0 0 30px #FF5F17, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;">çˆ†æ’ƒ</span>ï¼šãƒ©ãƒ³ãƒ€ãƒ ã§ã€æ”»æ’ƒåŠ›ãƒœãƒ¼ãƒŠã‚¹ãŒä»˜ãã¾ã™ã€‚<br>ä¾‹ï¼šæ”»æ’ƒåŠ›ï¼‹ãƒœãƒ¼ãƒŠã‚¹ï¼ˆï¼‘ã‚¹ãƒ†ãƒ¼ã‚¸ã«ã¤ãï¼’å›ã¾ã§ï¼‰',
        '<span style="color:#C299FF; text-shadow: 0 0 3px #C299FF, 0 0 30px #C299FF, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;">å¦¨å®³</span>ï¼šãƒ©ãƒ³ãƒ€ãƒ ã§ï¼‘ã‚¿ãƒ¼ãƒ³ç›¸æ‰‹ã‚’å°å°ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br>ã¾ãŸã€å°å°ã§ããªã‹ã£ãŸå ´åˆã¯ã€æ•µãŒ<span style="color:#FF0000; text-shadow: 0 0 3px #FF0000, 0 0 30px #FF0000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;">å¼·ã„æ”»æ’ƒ</span>ã‚’ã—ã¦ãã¾ã™ã€‚',
        '<span style="color:#FFABCE; text-shadow: 0 0 3px #FFABCE, 0 0 30px #FFABCE, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;">å›å¾©</span>ï¼šãƒ©ãƒ³ãƒ€ãƒ ã§HPãŒå›å¾©ã§ãã¾ã™ã€‚<span style="color:#FF0000; text-shadow: 0 0 3px #FF0000, 0 0 30px #FF0000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;">(å…¨ã‚¹ãƒ†ãƒ¼ã‚¸ï¼“å›ã¾ã§)</span>',
        'ã§ã¯ã€ã•ã£ããã‚¬ãƒãƒ£ã§ã€æ­¦å™¨ã‚’æ±ºã‚ã¾ã—ã‚‡ã†ã€‚<br>ã‚‚ã†ä¸€åº¦ã‚¹ãƒšãƒ¼ã‚¹ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚'
        ];

        //æ­¦å™¨ã‚¬ã‚·ãƒ£ã§å‡ºã¦ãã‚‹æ­¦å™¨ä¸€è¦§
const buki = [
  {name:"ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒ–ãƒ¬ãƒ¼ãƒ‰", power: 10, img:"images/buki/NEURAL_BRADE.png"},
  {name:"ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ©ãƒ³ãƒãƒ£ãƒ¼", power: 18, img:"images/buki/PROMPT_LAUNCHER.png"},
  {name:"ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒ”ã‚¢", power:7, img:"images/buki/DATA_SPEAR.png"},
  {name:"ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãƒãƒ³ãƒãƒ¼", power:15, img:"images/buki/ALGORITHM_HAMMER.png"},
  {name:"ã‚¯ãƒ©ã‚¦ãƒ‰ãƒœã‚¦", power:13, img:"images/buki/CLOUD_BOW.png"},
  {name:"ã‚¼ãƒ­ãƒ‡ã‚¤ãƒ–ãƒ¬ãƒ¼ãƒ‰", power:12, img:"images/buki/ZERO_DAYBLADE.png"},
  {name:"ã‚·ãƒ³ã‚®ãƒ¥ãƒ©ãƒªã‚¹ã‚¬ãƒ³ãƒˆãƒ¬ãƒƒãƒˆ", power:21, img:"images/buki/SINGULARIS_GAUNTLET.png"},
  {name:"ã‚¨ãƒ©ãƒ¼ãƒ©ãƒ³ã‚¹", power:13, img:"images/buki/ERROR_LANCE.png"},
  {name:"ã‚¸ãƒ£ãƒƒã‚¸ãƒ¡ãƒ³ãƒˆã‚³ãƒ¼ãƒ‰", power:18, img:"images/buki/JUDGEMENT_CODE.png"},
  {name:"ã‚ªãƒ©ã‚¯ãƒ«ã‚¨ãƒƒã‚¸", power:25, img:"images/buki/ORACLE_EDGE.png"}
];

        //ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ä¸€è¦§
        const monster = [
        {name:"ã‚¨ã‚³ãƒ¼ãƒœãƒƒãƒˆ", HP: 20, power:4 ,img:"images/monster/ECHOBOT.png"},
        {name:"ã‚¹ãƒ‘ãƒ ã‚¯ãƒ©ã‚¦ãƒ‰", HP:25, power:8, img:"images/monster/SPAM_CLOUD.png"},
        {name:"ãƒ•ã‚§ã‚¤ã‚¹ã‚¹ã‚­ãƒ£ãƒŠãƒ¼", HP:27, power:10, img:"images/monster/FACE_SCANNER.png"},
        {name:"ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ", HP:30, power:13, img:"images/monster/ALGORISMA.png"},
        {name:"ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¤ãƒ¼ã‚¿ãƒ¼", HP:38, power:19, img:"images/monster/PROMPT_EATER.png"},
        {name:"ã‚¸ãƒ£ãƒƒã‚¸ãƒ­ã‚¼", HP:40, power:20, img:"images/monster/JUDGE_ROSE.png"},
        {name:"ãƒŸãƒ©ãƒ¼ãƒãƒƒãƒˆ", HP:48, power:20, img:"images/monster/MIRRORNET.png"},
        {name:"ã‚·ãƒ³ã‚®ãƒ¥ãƒ©ãƒªã‚¹", HP:50, power:28, img:"images/monster/SINGULARIS.png"},
        {name:"ã‚ªãƒ©ã‚¯ãƒ«ãƒ»ãƒã‚¤ã‚º", HP:54, power:35, img:"images/monster/ORACLE_NOISE.png"},
        {name:"ã‚¼ãƒ­ã‚³ãƒ¼ãƒ‰", HP:70, power:42, img:"images/monster/ZERO_CODE.png"}
        ];


        //IDè¦ç´ å–å¾—

        //èƒŒæ™¯
       

        //ä¸€ç•ªç›®
        //èª¬æ˜æ–‡ç« 
        const setumeitextById = document.getElementById("setumeitext");
       

        //æ­¦å™¨ã‚¬ã‚·ãƒ£ç”»åƒ
        const bukigasyaimgById = document.getElementById("bukigasyaimg");
        //æ­¦å™¨ã‚¬ã‚·ãƒ£ãƒœã‚¿ãƒ³
        const bukigasyaById = document.getElementById("bukigasya");

        const syousaiById = document.getElementById("syousai");
        

        //äºŒç•ªç›®
        //h1ã‚¿ã‚°ã®ã‚¹ãƒ†ãƒ¼ã‚¸1ï½10è¡¨ç¤º
        const stageLabelById = document.getElementById("stageLabel");
        //ãƒ†ã‚­ã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹
        const textboxById = document.getElementById("textbox");
        //ãƒœã‚¿ãƒ³
        const battleMenuById = document.getElementById("battleMenu");
        //æ•µ
        const tekiById = document.getElementById("teki");
        //æ•µç”»åƒ
        const tekiimgById = document.getElementById("tekiimg");
        //è‡ªåˆ†
        const zibunnById = document.getElementById("zibunn");

        const youById = document.getElementById("you");
        const gameById = document.getElementById("game");






        //èƒŒæ™¯é–¢æ•°
       function showAIzyunbiBackground() {
       const bg = document.getElementById("background");
       bg.style.backgroundImage = "url('images/AIzyunbi.png')";
       bg.style.backgroundSize = "cover";
       bg.style.backgroundPosition = "center";
       bg.style.backgroundRepeat = "no-repeat";
       bg.style.backgroundAttachment = "fixed";
       bg.style.display = "block";
       }

       function changeBackground() {
       document.body.style.backgroundImage = "url('images/AI.png')";
       document.body.style.backgroundSize = "cover";
       document.body.style.backgroundPosition = "center";
       document.body.style.backgroundRepeat = "no-repeat";
       document.body.style.backgroundAttachment = "fixed";
       }

       //èƒŒæ™¯å‰Šé™¤é™¤
       function hideAIzyunbiBackground() {
       const bg = document.getElementById("background");
       bg.style.display = "none";
       }

       function switchBGMWithFadeIn(newSrc, duration = 3000, targetVolume = 0.2) {
       const bgm = document.getElementById("bgm");
  bgm.pause();
  bgm.src = newSrc;
  bgm.load();
  bgm.volume = 0; // æœ€åˆã¯ç„¡éŸ³
  bgm.loop = true;
  bgm.play().catch((error) => {
    console.error("BGMå†ç”Ÿã‚¨ãƒ©ãƒ¼:", error);
  });

  // ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³å‡¦ç†
  const stepTime = 100; // 0.1ç§’ã”ã¨ã«éŸ³é‡ã‚’ä¸Šã’ã‚‹
  const steps = duration / stepTime;
  let currentStep = 0;

  const fadeInterval = setInterval(() => {
    currentStep++;
    bgm.volume = Math.min(currentStep / steps * targetVolume, targetVolume);
    if (currentStep >= steps) {
      clearInterval(fadeInterval);
    }
  }, stepTime);
}




       window.addEventListener("load", function() {
  // æœ€åˆã®èª¬æ˜æ–‡ã‚’è¡¨ç¤º
  setumeitextById.innerHTML = setumeibunnsyou[setumeiLine];
  setumeiLine++;
  step++;

  // èƒŒæ™¯ã‚’è¡¨ç¤º
  showAIzyunbiBackground();
});


function updateEnemyStatus() {
  tekiById.innerHTML = `HPï¼š<span class="glow-blue">${monsterHP}</span>&nbsp;&nbsp;&nbsp;&nbsp;æ”»æ’ƒåŠ›ï¼š<span class="glow-red">${currentMonster.power}</span>`;
}







        document.addEventListener("keydown",function(e){

            //ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ãŒæŠ¼ã•ã‚ŒãŸã‹ã¤ã€ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ãŒç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ãªã„ã¨ãã ã‘å‡¦ç†ã‚’å®Ÿè¡Œ
            if(e.code === "Space" && !spaceDisabled){
                 
                //ãƒ–ãƒ©ã‚¦ã‚¶ãŒã„ã¤ã‚‚ã®å‹•ä½œã‚’ã—ãªã„ã‚ˆã†ã«ã™ã‚‹
                e.preventDefault();

                if (gameOver) {
                // ğŸ” ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã‹ã‚‰å†èµ·å‹•å‡¦ç†
                location.href = "start.html"; // â† æœ€åˆã®ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆç”»é¢ã«æˆ»ã™
                return;
             }



                //BGMè¨­å®š
                const bgm = document.getElementById("bgm");
                bgm.volume = 0.6; // éŸ³é‡ã¯ 0.0 ï½ 1.0
                bgm.loop = true;
                bgm.play().catch((error) => {
                console.error("BGMå†ç”Ÿã‚¨ãƒ©ãƒ¼:", error);
              });
             


                syousaiById.innerHTML = `â€»SPACEã‚’æŠ¼ã—ã¦æ¬¡ã«é€²ã¿ã¾ã™ã€‚`;
                
                //èª¬æ˜æ–‡ç« ä¸€ã¤ãšã¤è¡¨ç¤º
                if(setumeiLine < setumeibunnsyou.length){
                  
                    setumeitextById.innerHTML = setumeibunnsyou[setumeiLine];
                    setumeiLine++;
                    step++;

                //æ­¦å™¨ã‚¬ã‚·ãƒ£ã®ä¸­èº«å‡¦ç†ï¼‹æ­¦å™¨ã‚¬ã‚·ãƒ£ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’åˆ¶å¾¡ã™ã‚‹å‡¦ç†
                }else if(!bukigasyaShown){

                    //ã‚¿ã‚¤ãƒŸãƒ³ã‚°å‡¦ç†
                    
                    syousaiById.style.display = "none";
                    bukigasyaimgById.style.display = "block";
                    bukigasyaById.style.display = "inline-block";
                    bukigasyaShown = true;
                    bukigasyaShown = true;
                   
                    
                    

                    //æˆ¦é—˜é–‹å§‹è¡¨ç¤º
                }else if(bukiDrawn && step >= setumeibunnsyou.length){
                    currentMonster = monster[currentStage];
                    monsterHP = currentMonster.HP;
                    hideAIzyunbiBackground(); // â† ã“ã‚Œã§æº–å‚™å®¤ã®èƒŒæ™¯ã‚’æ¶ˆã™
                    changeBackground(); // â† ã“ã“ã§èƒŒæ™¯ã‚’è¡¨ç¤ºï¼
                    switchBGMWithFadeIn("sounds/MusMus-BGM-172.mp3", 3000);


                   
                    setumeitextById.textContent = "";
                    bukigasyaimgById.style.display = "none";
                    bukigasyaById.style.display = "none";
                    syousaiById.style.display = "none";
                    textboxById.style.display = "block";
                    battleMenuById.style.display = "block";
                    tekiById.style.display = "block";
                    zibunnById.style.display = "block";
                    

                    // ã‚¹ãƒ†ãƒ¼ã‚¸è¡¨ç¤º
                    
                    stageLabelById.style.display = "block";
                    stageLabelById.textContent = `STAGE${currentStage + 1}`;

                    // æ•µè¡¨ç¤ºï¼ˆä¿®æ­£æ¸ˆã¿ï¼‰
                    zibunnById.innerHTML = `HPï¼š<span class="glow-green">${MyHP}</span>&nbsp;&nbsp;&nbsp;&nbsp;æ”»æ’ƒåŠ›ï¼š<span class="glow-red">${mybuki.power}</span>`;
                    tekiimgById.src = currentMonster.img;
                    tekiimgById.style.display = "block";
                    tekiById.innerHTML = `HPï¼š<span class="glow-blue">${monsterHP}</span>&nbsp;&nbsp;&nbsp;&nbsp;æ”»æ’ƒåŠ›ï¼š<span class="glow-red">${currentMonster.power}</span>`;
                    textboxById.innerHTML += `STAGE1ï¼š<span class="glow-blue">${currentMonster.name}</span>ãŒã‚ã‚‰ã‚ã‚ŒãŸï¼ï¼ã•ãã©ã†ã™ã‚‹ï¼Ÿ`;
                    spaceDisabled = true;               
                }
            }
        });


        // ãƒ­ã‚°é–¢æ•°
function addLog(message) {
  const textbox = document.getElementById("textbox");
  const logEntry = `<div>${message}</div>`;
  textbox.innerHTML = logEntry + textbox.innerHTML;

}


       




        //æ”»æ’ƒå‡¦ç†
        document.getElementById("kougeki").addEventListener("click", function () {
        
          playSound("attackSound");


        monsterHP -= mybuki.power;
        if (monsterHP < 0) monsterHP = 0;
  

// ğŸ”§ HPè¡¨ç¤ºæ›´æ–°

tekiById.innerHTML = `HPï¼š<span class="glow-blue">${monsterHP}</span>&nbsp;&nbsp;&nbsp;&nbsp;æ”»æ’ƒåŠ›ï¼š<span class="glow-red">${currentMonster.power}</span>`;
 

  addLog(`<span class="glow-green">è‡ªåˆ†ã®æ”»æ’ƒï¼</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="glow-blue">${currentMonster.name}</span>ã«<span class="glow-red">${mybuki.power}ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼</span>&nbsp;&nbsp;&nbsp;&nbsp;ç›¸æ‰‹ã®æ®‹ã‚ŠHPï¼š<span class="glow-blue">${monsterHP}</span>`);

  if (monsterHP === 0) {
    playSound("aidaSound");
    addLog(`<span class="glow-blue">${currentMonster.name}</span>ã‚’å€’ã—ãŸï¼ğŸŒŸ`);
    bakugekiCount = 0;
    currentStage++;
    boukaiUsed = false;
    document.getElementById("bougai").disabled = false;

    if (currentStage < monster.length) {
      currentMonster = monster[currentStage];
      monsterHP = currentMonster.HP;

      tekiimgById.src = currentMonster.img;
      tekiimgById.style.display = "block";
      updateEnemyStatus();

 

      stageLabelById.style.display = "block";
      stageLabelById.textContent = `STAGE${currentStage + 1}`;

                    
     
      
      
      addLog(`STAGE${currentStage + 1}ï¼š<span class="glow-blue">${currentMonster.name}</span>ãŒã‚ã‚‰ã‚ã‚ŒãŸï¼ï¼ã•ãã©ã†ã™ã‚‹ï¼Ÿ`);
    } else {
      playSound("clearSound");
      addLog(`å…¨ã¦ã®ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’å€’ã—ãŸï¼ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢ï¼ğŸ®ğŸ•¹ï¸`);
      battleMenuById.style.display = "none";
    }
  } else {
    if (isEnemySealed) {
      addLog(`<span class="glow-blue">${currentMonster.name}</span>ã¯å¦¨å®³ã•ã‚Œã¦è¡Œå‹•ã§ããªã„ï¼`);
      isEnemySealed = false;
      document.getElementById("bougai").disabled = false;
    } else {
      MyHP -= currentMonster.power;
      if (MyHP < 0) MyHP = 0;
      zibunnById.innerHTML = `HPï¼š<span class="glow-green">${MyHP}</span>&nbsp;&nbsp;&nbsp;&nbsp;æ”»æ’ƒåŠ›ï¼š<span class="glow-red">${mybuki.power}</span>`;
      addLog(`<span class="glow-blue">${currentMonster.name}ã®æ”»æ’ƒï¼</span>&nbsp;&nbsp;&nbsp;&nbsp;ã‚ãªãŸã¯<span class="glow-red">${currentMonster.power}ãƒ€ãƒ¡ãƒ¼ã‚¸</span>ã‚’å—ã‘ãŸï¼&nbsp;&nbsp;&nbsp;&nbsp;è‡ªåˆ†ã®æ®‹ã‚ŠHPï¼š<span class="glow-green">${MyHP}</span>`);

      if (MyHP === 0) {
        playSound("overSound");
        addLog(`ã‚ãªãŸã¯å€’ã‚Œã¾ã—ãŸâ€¦ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼âœ–ï¸`);
        battleMenuById.style.display = "none";
        tekiById.style.display = "none";
        tekiimgById.style.display = "none";
        zibunnById.style.display = "none";
        youById.innerHTML = `GAMEOVER`;
        gameById.innerHTML = `ã¾ãŸã®æŒ‘æˆ¦ã‚’å¾…ã£ã¦ã‚‹ã‚ˆï¼<br>â€»SPACEã‚’æŠ¼ã—ã¦ãƒ‡ãƒ¢ç”»é¢ã«æˆ»ã‚Šã¾ã™ã€‚`;
        const bgm = document.getElementById("bgm");
        bgm.pause();
        gameOver = true;
        spaceDisabled = false; // SPACEã‚­ãƒ¼ã‚’å†ã³æœ‰åŠ¹åŒ–


      }
    }
  }
});
   bukigasyaById.addEventListener("click", function () {
  const bukigasyaByIdresult = buki[Math.floor(Math.random() * buki.length)];

  // æ­¦å™¨ç”»åƒã‚’è¡¨ç¤º
  bukigasyaimgById.src = bukigasyaByIdresult.img;
  bukigasyaimgById.style.display = "block";

  // æ­¦å™¨åãƒ»æ”»æ’ƒåŠ›ã‚’è¡¨ç¤º
  setumeitextById.innerHTML = `
    ã‚ãªãŸã®æ­¦å™¨ã¯
    <span style="color:#78FF94; text-shadow: 0 0 3px #78FF94, 0 0 30px #78FF94;">
      ${bukigasyaByIdresult.name}
    </span><br>
    æ”»æ’ƒåŠ›ï¼š
    <span style="color:#FF0000; text-shadow: 0 0 3px #FF0000, 0 0 30px #FF0000;">
      ${bukigasyaByIdresult.power}
    </span><br>
    <span style="color:#A7F1FF; text-shadow: 0 0 3px #00ECFF, 0 0 30px #A7F1FF;">
      ã‚¹ãƒšãƒ¼ã‚¹ã‚’æŠ¼ã—ã¦æˆ¦ã„ã«è¡Œã
    </span>
  `;

  // æ­¦å™¨æƒ…å ±ã‚’ä¿å­˜
  mybuki = bukigasyaByIdresult;
  bukiDrawn = true;

  // ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤º
  this.style.display = "none";

  step++;
});

                    //ãƒ­ã‚°é–¢æ•°
                 function addLog(message) {
  const textbox = document.getElementById("textbox");
  const logEntry = `<div>${message}</div>`;
  textbox.innerHTML = logEntry + textbox.innerHTML;
}   



                    //çˆ†æ’ƒãƒ‘ãƒ¯ãƒ¼
        const bakugekiWeak = [0,1,2,3];
        const bakugekiStrong = [0,5,7,8,10];

        let bakugekiCount = 0;
        const maxBakugekiPerStage = 2;


        //çˆ†æ’ƒå‡¦ç†
        document.getElementById("bakugeki").addEventListener("click", function () {
          
  if (bakugekiCount >= maxBakugekiPerStage) {
    playSound("sealSoundm");
    addLog(`æ¬¡ã®ã‚¹ãƒ†ãƒ¼ã‚¸ã¾ã§ã€ä½¿ãˆãªã„ã‚ˆï¼ğŸ˜¥`);
    return;
  }

  bakugekiCount++;

  const bonusList = currentStage >= 5 ? bakugekiStrong : bakugekiWeak;
  const bonus = bonusList[Math.floor(Math.random() * bonusList.length)];
  const totalDamage = mybuki.power + bonus;

  monsterHP -= totalDamage;
  if (monsterHP < 0) monsterHP = 0;
  playSound("bombSound");

  tekiById.innerHTML = `HPï¼š<span class="glow-blue">${monsterHP}</span>&nbsp;&nbsp;&nbsp;&nbsp;æ”»æ’ƒåŠ›ï¼š<span class="glow-red">${currentMonster.power}</span>`;



  addLog(`<span class="glow-orange">çˆ†æ’ƒç™ºå‹•ï¼ï¼</span>ğŸ’¥&nbsp;&nbsp;&nbsp;&nbsp;${mybuki.name}ï¼šæ”»æ’ƒåŠ›${mybuki.power}&nbsp;&nbsp;+&nbsp;&nbsp;ãƒœãƒ¼ãƒŠã‚¹ï¼š${bonus}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åˆè¨ˆï¼š<span class="glow-red">${totalDamage}ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼</span>&nbsp;&nbsp;&nbsp;&nbsp;ç›¸æ‰‹ã®æ®‹ã‚ŠHPï¼š<span class="glow-blue">${monsterHP}</span><br>(æ®‹ã‚Šçˆ†æ’ƒï¼š${maxBakugekiPerStage - bakugekiCount}å›)`);

  if (monsterHP === 0) {
    playSound("aidaSound");
    addLog(`<span class="glow-blue">${currentMonster.name}</span>ã‚’å€’ã—ãŸï¼ğŸŒŸ`);
    currentStage++;
    bakugekiCount = 0;
    boukaiUsed = false;
    document.getElementById("bougai").disabled = false;

  

    if (currentStage < monster.length) {
      currentMonster = monster[currentStage];
      monsterHP = currentMonster.HP;
      updateEnemyStatus();

      bakugekiCount = 0;

      tekiimgById.src = currentMonster.img;
      tekiimgById.style.display = "block";

      stageLabelById.style.display = "block";
      stageLabelById.textContent = `STAGE${currentStage + 1}`;
       
    } else {
      playSound("clearSound");
      addLog(`å…¨ã¦ã®ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’å€’ã—ãŸï¼ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢ï¼ğŸ®ğŸ•¹ï¸`);
      battleMenuById.style.display = "none";
    }
  } else {
    if (isEnemySealed) {
      addLog(`<span class="glow-blue">${currentMonster.name}</span>ã¯å¦¨å®³ã•ã‚Œã¦è¡Œå‹•ã§ããªã„ï¼`);
      isEnemySealed = false;
      document.getElementById("bougai").disabled = false;
    } else {
      MyHP -= currentMonster.power;
      if (MyHP < 0) MyHP = 0;
      zibunnById.innerHTML = `HPï¼š<span class="glow-green">${MyHP}</span>&nbsp;&nbsp;&nbsp;&nbsp;æ”»æ’ƒåŠ›ï¼š<span class="glow-red">${mybuki.power}</span>`;
      addLog(`<span class="glow-blue">${currentMonster.name}ã®æ”»æ’ƒï¼</span>&nbsp;&nbsp;&nbsp;&nbsp;ã‚ãªãŸã¯<span class="glow-red">${currentMonster.power}ãƒ€ãƒ¡ãƒ¼ã‚¸</span>ã‚’å—ã‘ãŸï¼&nbsp;&nbsp;&nbsp;&nbsp;è‡ªåˆ†ã®æ®‹ã‚ŠHPï¼š<span class="glow-green">${MyHP}</span>`);

      if (MyHP === 0) {
        playSound("overSound");
        addLog(`ã‚ãªãŸã¯å€’ã‚Œã¾ã—ãŸâ€¦ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼âœ–ï¸`);
        battleMenuById.style.display = "none";
        tekiById.style.display = "none";
        tekiimgById.style.display = "none";
        zibunnById.style.display = "none";
        youById.innerHTML = `GAMEOVER`;
        gameById.innerHTML = `ã¾ãŸã®æŒ‘æˆ¦ã‚’å¾…ã£ã¦ã‚‹ã‚ˆï¼<br>â€»SPACEã‚’æŠ¼ã—ã¦ãƒ‡ãƒ¢ç”»é¢ã«æˆ»ã‚Šã¾ã™ã€‚`;
        const bgm = document.getElementById("bgm");
        bgm.pause();
        gameOver = true;
        spaceDisabled = false; // SPACEã‚­ãƒ¼ã‚’å†ã³æœ‰åŠ¹åŒ–


      }
    }
  }
});

      //ãƒ­ã‚°é–¢æ•°
      function addLog(message) {
  const textbox = document.getElementById("textbox");
  const logEntry = `<div>${message}</div>`;
  textbox.innerHTML = logEntry + textbox.innerHTML;
}




        //å¦¨å®³å‡¦ç†
 let isEnemySealed = false;

document.getElementById("bougai").addEventListener("click", function () {
  const successRate = 0.5;
  const isSuccess = Math.random() < successRate;

  if (isSuccess) {
    playSound("sealSounds");
    isEnemySealed = true;
    addLog(`<span class="glow-perple">å¦¨å®³æˆåŠŸï¼ï¼</span>ğŸ˜&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#2C7CFF";>${currentMonster.name}</span>ã¯æ¬¡ã®ã‚¿ãƒ¼ãƒ³è¡Œå‹•ä¸èƒ½ï¼`);
    document.getElementById("bougai").disabled = true;
  } else {
    playSound("sealSoundm");
    addLog(`<span class="glow-perple">å¦¨å®³å¤±æ•—â€¦</span>ğŸ˜¨&nbsp;&nbsp;&nbsp;&nbsp;<span class="glow-blue">${currentMonster.name}</span>ã¯æ€’ã£ã¦æ”»æ’ƒã—ã¦ããŸï¼`);
    MyHP -= currentMonster.power;
    if (MyHP < 0) MyHP = 0;
   zibunnById.innerHTML = `HPï¼š<span class="glow-green">${MyHP}</span>&nbsp;&nbsp;&nbsp;&nbsp;æ”»æ’ƒåŠ›ï¼š<span class="glow-red">${mybuki.power}</span>`;
    addLog(`<span class="glow-blue">${currentMonster.name}ã®æ€’ã‚Šã®æ”»æ’ƒï¼ï¼ğŸ˜¡</span>&nbsp;&nbsp;&nbsp;&nbsp;ã‚ãªãŸã¯<span class="glow-red">${currentMonster.power + 8}ãƒ€ãƒ¡ãƒ¼ã‚¸</span>ã‚’å—ã‘ãŸï¼&nbsp;&nbsp;&nbsp;&nbsp;è‡ªåˆ†ã®æ®‹ã‚ŠHPï¼š<span class="glow-green">${MyHP}</span>`);

    if (MyHP === 0) {
      playSound("overSound");
      addLog(`ã‚ãªãŸã¯å€’ã‚Œã¾ã—ãŸâ€¦ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼âœ–ï¸`);
      battleMenuById.style.display = "none";
        tekiById.style.display = "none";
        tekiimgById.style.display = "none";
        zibunnById.style.display = "none";
        youById.innerHTML = `GAMEOVER`;
        gameById.innerHTML = `ã¾ãŸã®æŒ‘æˆ¦ã‚’å¾…ã£ã¦ã‚‹ã‚ˆï¼<br>â€»SPACEã‚’æŠ¼ã—ã¦ãƒ‡ãƒ¢ç”»é¢ã«æˆ»ã‚Šã¾ã™ã€‚`;
      const bgm = document.getElementById("bgm");
      bgm.pause();
      gameOver = true;
      spaceDisabled = false; // SPACEã‚­ãƒ¼ã‚’å†ã³æœ‰åŠ¹åŒ–


    }
  }
});




      //ãƒ­ã‚°é–¢æ•°
      function addLog(message) {
  const textbox = document.getElementById("textbox");
  const logEntry = `<div>${message}</div>`;
  textbox.innerHTML = logEntry + textbox.innerHTML;
}





    
        //å›å¾©å‡¦ç†
let healCount = 0;
const maxHealPerStage = 3;
const maxHP = 100;

document.getElementById("kaihuku").addEventListener("click", function () {
  playSound("healSound");
  if (healCount >= maxHealPerStage) {
    this.disabled = true;
    return;
  }

  const healAmount = Math.floor(Math.random() * 11) + 5; // 5ã€œ15å›å¾©
  MyHP += healAmount;
 
  healCount++;

  addLog(`<span class="glow-pink">å›å¾©ï¼ï¼</span>ğŸ’&nbsp;&nbsp;&nbsp;&nbsp;HPãŒ${healAmount}å›å¾©ã—ã¦<span class="glow-green">${MyHP}</span>ã«ãªã£ãŸï¼&nbsp;&nbsp;&nbsp;&nbsp;ï¼ˆæ®‹ã‚Šå›å¾©ï¼š${maxHealPerStage - healCount}å›ï¼‰`);
  zibunnById.innerHTML = `HPï¼š<span class="glow-green">${MyHP}</span>&nbsp;&nbsp;&nbsp;&nbsp;æ”»æ’ƒåŠ›ï¼š<span class="glow-red">${mybuki.power}</span>`;

  if (healCount >= maxHealPerStage) {
    this.disabled = true;
    addLog(`<span class=glow-pink">å›å¾©å›æ•°</span>ãŒä¸Šé™ã«é”ã—ãŸã‚ˆï¼ï¼â¤ï¸â€ğŸ©¹`);
  }
});




    </script>
</body>
</html>                   