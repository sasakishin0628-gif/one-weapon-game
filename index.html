<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="index.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap" rel="stylesheet">
</head>
<body>

<audio id="kurezittoSound" src="sounds/kurezitto.mp3"></audio>

    <!--タイトル-->
    <h1>ONE WEAPON</h1>
    
    <!--スタートボタンを押したらmein.htmlに飛ぶ-->
    <div class="button1">
        <button id="startbutton">START</button>
    </div>
    
    
    
    <!--クレジット数を表示-->
    <div class="mozi1">
        <p class="kurezitto">クレジット数：<span id="creditCount">0</span></p>
        <p class="setumei">※「C」キーで100円投入</p>
    </div>
    


    <script type="text/javascript">

               //効果音再生関数
       function playSound(id) {
       const sound = document.getElementById(id);
       if (sound) {
       sound.currentTime = 0;
       sound.volume = 1.0; // 🔊 最大音量に設定！
       sound.play().catch((error) => {
       console.error("効果音再生エラー:", error);
     });
   }
 }


    //クレジット
    const credit = document.getElementById("creditCount");

    //スタートボタン
    const start = document.getElementById("startbutton");

    //最初のスタートボタンは無効化
    start.disabled = true;

    //お金カウンター
    let okanecounter = 0;

        //eキーを押すことでクレジットが入る。かつスタートボタンが有効化
        document.addEventListener("keydown",function(e){
            if(e.key.toLowerCase() == "c") {
                playSound("kurezittoSound");
                okanecounter++;
                credit.textContent = okanecounter;
                start.disabled = false;
            }
        });


        //スタートボタンを押すことによって、クレジットがマイナス１される。また、クレジットが入ってない場合、スタートボタンは無効化。
        start.addEventListener("click",function(){
            if(okanecounter > 0){
                okanecounter--;
                credit.textContent = okanecounter;

                if(okanecounter == 0){
                    start.disabled = true;
                }
                //スタートボタンを押したらmein.htmlに飛ぶ
                window.location.href="mein.html";
            }
        });

        

    </script>
</body>
</html>